webpackJsonp([40],{1377:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=a(52),u=n(o),c=a(45),d=n(c),s=a(21),f=n(s),p=a(29),m=n(p),h=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(56),a(51),a(27),a(31);var y=a(0),g=n(y),b=a(1876),v=n(b),_=(a(20),a(1631)),E=(n(_),m.default.TabPane,f.default.Option,function(e){function t(e){l(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a.callback=a.callback.bind(a),a}return i(t,e),h(t,[{key:"callback",value:function(e){console.log(e)}},{key:"render",value:function(){return g.default.createElement("div",null,g.default.createElement(d.default,null),g.default.createElement(d.default,{gutter:8,style:{marginTop:"10px"}},g.default.createElement(u.default,{span:24},g.default.createElement("div",{style:{padding:"15px"}},g.default.createElement("span",{style:{fontSize:"20px",fontWeight:"bold"}},"\u5408\u540c\u7ba1\u7406")),g.default.createElement(v.default,null))))}}]),t}(g.default.Component));t.default=E,e.exports=t.default},1631:function(e,t,a){var n=a(2034);"string"===typeof n&&(n=[[e.i,n,""]]);var l={hmr:!0};l.transform=void 0;a(11)(n,l);n.locals&&(e.exports=n.locals)},1794:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=a(169),u=n(o),c=a(266),d=n(c),s=a(12),f=n(s),p=a(65),m=(n(p),a(100)),h=n(m),y=a(21),g=n(y),b=a(29),v=n(b),_=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(264),a(470),a(38),a(72),a(129),a(27),a(31);var E=a(0),w=n(E),C=a(1631),k=(n(C),a(20),v.default.TabPane,g.default.Option,h.default.Item,function(e){function t(){var e,a,n,i;l(this,t);for(var o=arguments.length,u=Array(o),c=0;c<o;c++)u[c]=arguments[c];return a=n=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),n.state={previewVisible:!1,previewImage:"",fileList:[{uid:-1,name:"xxx.png",status:"done",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"}]},n.handleCancel=function(){return n.setState({previewVisible:!1})},n.handlePreview=function(e){n.setState({previewImage:e.url||e.thumbUrl,previewVisible:!0})},n.handleChange=function(e){var t=e.fileList;return n.setState({fileList:t})},i=a,r(n,i)}return i(t,e),_(t,[{key:"render",value:function(){var e=this.state,t=e.previewVisible,a=e.previewImage,n=e.fileList,l=w.default.createElement("div",null,w.default.createElement(f.default,{type:"plus"}),w.default.createElement("div",{className:"ant-upload-text"},"Upload"));return w.default.createElement("div",{className:"clearfix"},w.default.createElement(d.default,{action:"//jsonplaceholder.typicode.com/posts/",listType:"picture-card",fileList:n,onPreview:this.handlePreview,onChange:this.handleChange},n.length>=3?null:l),w.default.createElement(u.default,{visible:t,footer:null,onCancel:this.handleCancel},w.default.createElement("img",{alt:"example",style:{width:"100%"},src:a})))}}]),t}(w.default.Component));t.default=k,e.exports=t.default},1875:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(){return!1}function c(e,t){var a=this.state.form;a[e]=t,this.setState({form:a})}function d(){this.props.handleAddCancel(),this.props.form.resetFields(),this.setState({showFileList:[],fileList:[]})}function s(e){var t=this;this.setState({loading:!0});var a=this.state.fileList,n=new FormData;a.forEach(function(e){n.append("ContractForm[contract_files][]",e)}),e.preventDefault(),this.props.form.validateFields(function(e,a){if(console.log(e),e)t.setState({loading:!1});else{var l=t.state.form;n.append("buyer_id",l.buyer_id),n.append("saler_id",l.saler_id),n.append("start_date",l.start_date),n.append("end_date",l.end_date),n.append("contract_code",l.contract_code),n.append("contract_name",l.contract_name),n.append("type_id",l.type_id),A.RequireUtils.fileBaseRequire("contract/add-contract",n,function(e){e.code?(alert(e.msg),this.setState({loading:!1}),this.props.go(),this.props.handleAddCancel(),this.setState({showFileList:[],fileList:[]}),this.props.form.resetFields()):(alert(e.msg),this.setState({loading:!1}))}.bind(t))}})}Object.defineProperty(t,"__esModule",{value:!0});var f=a(41),p=n(f),m=a(169),h=n(m),y=a(266),g=n(y),b=a(45),v=n(b),_=a(52),E=n(_),w=a(64),C=n(w),k=a(12),x=n(k),S=a(265),O=n(S),L=a(21),P=n(L),F=a(29),j=n(F),M=a(100),R=n(M),D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},q=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(62),a(264),a(470),a(51),a(56),a(63),a(38),a(469),a(27),a(31),a(129);var T=a(0),Y=n(T),U=a(1794),A=(n(U),a(20)),V=a(1631),I=(n(V),a(24)),z=(n(I),R.default.create),N=R.default.Item,G=(j.default.TabPane,P.default.Option),J=(O.default.MonthPicker,function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleCancel=function(){return a.setState({previewVisible:!1})},a.handleChange=function(e){var t=a,n=new FileReader;if("removed"==e.file.status){var r=a.state.showFileList,i=r.indexOf(e.file),o=r.slice();return o.splice(i,1),void t.setState({showFileList:[].concat(l(o))})}n.readAsDataURL(e.file),n.onload=function(e){var a=t.state.showFileList,n={uid:(new Date).getTime(),name:"xxx.png",status:"done",url:this.result};t.setState({showFileList:[].concat(l(a),[n])})}},a.state={loading:!1,previewVisible:!1,previewImage:"",companyoptions:[],contracttypeoptions:[],fileList:[],showFileList:[],uploading:!1,form:{buyer_id:"",saler_id:"",start_date:"",end_date:"",contract_code:"",contract_name:"",type_id:""}},a.callback=a.callback.bind(a),a}return o(t,e),q(t,[{key:"callback",value:function(e){console.log(e)}},{key:"componentDidMount",value:function(){A.RequireUtils.baseRequire("/contract/company-select",{},function(e){if(1==e.code){var t=e.data.list;this.setState({companyoptions:t})}else alert(e.msg)}.bind(this)),A.RequireUtils.baseRequire("/contract/type-select",{},function(e){if(1==e.code){var t=e.data.list;this.setState({contracttypeoptions:t})}else alert(e.msg)}.bind(this))}},{key:"contractLen",value:function(e,t,a){t.length>20?a("\u4e0d\u5f97\u8d85\u8fc720\u4f4d!"):a()}},{key:"contractNameLen",value:function(e,t,a){t.length>20?a("\u4e0d\u5f97\u8d85\u8fc720\u4f4d!"):a()}},{key:"render",value:function(){var e=this,t={labelCol:{span:24},wrapperCol:{span:24}},a=this.state,n=a.previewVisible,r=a.previewImage,i=(a.fileList,a.companyoptions),o=a.showFileList,f=a.contracttypeoptions,m=this.props.form.getFieldDecorator,y=Y.default.createElement("div",null,Y.default.createElement(x.default,{type:"plus"}),Y.default.createElement("div",{className:"ant-upload-text"},"Upload")),b={action:"//jsonplaceholder.typicode.com/posts/",listType:"picture-card",onRemove:function(t){e.setState(function(e){var a=e.fileList,n=a.indexOf(t),l=a.slice();return l.splice(n,1),{fileList:l}})},beforeUpload:function(t){return e.setState(function(e){return{fileList:[].concat(l(e.fileList),[t])}}),!1},fileList:this.state.fileList};return Y.default.createElement("div",{className:"my-custom-padding"},Y.default.createElement("main",null,Y.default.createElement(R.default,null,Y.default.createElement(v.default,{gutter:8},Y.default.createElement(E.default,{span:11},Y.default.createElement(N,D({},t,{label:"\u5408\u540c\u7f16\u53f7"}),m("contract_code",{initialValue:"",rules:[{required:!0,message:"\u8be5\u9009\u9879\u4e3a\u5fc5\u586b\u9879"},{validator:this.contractLen.bind(this)}]})(Y.default.createElement(C.default,{onContextMenu:u,onPaste:u,onCopy:u,onCut:u,autoComplete:"off",onChange:function(t){return c.bind(e)("contract_code",t.target.value)}})))),Y.default.createElement(E.default,{span:2}),Y.default.createElement(E.default,{span:11},Y.default.createElement(N,D({},t,{label:"\u5408\u540c\u540d\u79f0"}),m("contract_name",{initialValue:"",rules:[{required:!0,message:"\u8be5\u9009\u9879\u4e3a\u5fc5\u586b\u9879"},{validator:this.contractNameLen.bind(this)}]})(Y.default.createElement(C.default,{onContextMenu:u,onPaste:u,onCopy:u,onCut:u,autoComplete:"off",onChange:function(t){return c.bind(e)("contract_name",t.target.value)}}))))),Y.default.createElement(v.default,{gutter:8},Y.default.createElement(E.default,{span:11},Y.default.createElement(N,D({},t,{label:"\u9009\u62e9\u7532\u65b9"}),m("saler_id",{initialValue:"",rules:[{required:!0,message:"\u8be5\u9009\u9879\u4e3a\u5fc5\u586b\u9879"}]})(Y.default.createElement(P.default,{style:{width:"100%"},onChange:function(t){return c.bind(e)("saler_id",t)}},i.map(function(e,t){return Y.default.createElement(G,{value:e.id,key:t},e.company_name)}))))),Y.default.createElement(E.default,{span:2}),Y.default.createElement(E.default,{span:11},Y.default.createElement(N,D({},t,{label:"\u9009\u62e9\u4e59\u65b9"}),m("buyer_id",{initialValue:"",rules:[{required:!0,message:"\u8be5\u9009\u9879\u4e3a\u5fc5\u586b\u9879"}]})(Y.default.createElement(P.default,{style:{width:"100%"},onChange:function(t){return c.bind(e)("buyer_id",t)}},i.map(function(e,t){return Y.default.createElement(G,{value:e.id,key:t},e.company_name)})))))),Y.default.createElement(v.default,null,Y.default.createElement(E.default,{span:11},Y.default.createElement("div",null,Y.default.createElement("span",{style:{color:"red",fontSize:"14px",fontFamily:"SimSun",marginRight:"4px"}},"*"),"\u6301\u7eed\u65f6\u95f4"),Y.default.createElement(v.default,{style:{marginTop:"3px"}},Y.default.createElement(E.default,{span:11},Y.default.createElement(N,t,m("start_date",{rules:[{required:!0,message:"\u8be5\u9009\u9879\u4e3a\u5fc5\u586b\u9879"}]})(Y.default.createElement(O.default,{placeholder:"",onChange:function(t,a){return c.bind(e)("start_date",a)},style:{width:"100%"}})))),Y.default.createElement(E.default,{span:2},Y.default.createElement("div",{style:{marginTop:"9px",textAlign:"center"}},"\u81f3")),Y.default.createElement(E.default,{span:11},Y.default.createElement(N,t,m("end_date",{rules:[{required:!0,message:"\u8be5\u9009\u9879\u4e3a\u5fc5\u586b\u9879"}]})(Y.default.createElement(O.default,{placeholder:"",onChange:function(t,a){return c.bind(e)("end_date",a)},style:{width:"100%"}})))))),Y.default.createElement(E.default,{span:2}),Y.default.createElement(E.default,{span:11},Y.default.createElement(N,D({},t,{label:"\u5408\u540c\u7c7b\u578b"}),m("type_id",{initialValue:"",rules:[{required:!0,message:"\u8be5\u9009\u9879\u4e3a\u5fc5\u586b\u9879"}]})(Y.default.createElement(P.default,{style:{width:"100%"},onChange:function(t){return c.bind(e)("type_id",t)}},f.map(function(e,t){return Y.default.createElement(G,{value:e.meta_code,key:t},e.meta_name)})))))),Y.default.createElement(v.default,{gutter:8},Y.default.createElement(v.default,{gutter:8,style:{marginTop:"10px",marginLeft:"4px"}},Y.default.createElement(g.default,D({},b,{fileList:o,onChange:this.handleChange}),o.length>=1e3?null:y),Y.default.createElement("small",{style:{verticalAlign:"bottom",marginLeft:"10px"}},"\u4ec5\u652f\u6301JPG\u3001PNG\u683c\u5f0f\uff0c\u6587\u4ef6\u5c0f\u4e8e1M(\u65b9\u5f62\u56fe)"),Y.default.createElement(h.default,{visible:n,footer:null,onCancel:this.handleCancel},Y.default.createElement("img",{alt:"example",style:{width:"100%"},src:r})))),Y.default.createElement(v.default,{style:{marginTop:"10px"}},Y.default.createElement(E.default,{style:{textAlign:"right"}},Y.default.createElement(p.default,{onClick:d.bind(this),style:{marginRight:"10px"}},"\u53d6\u6d88"),Y.default.createElement(p.default,{type:"primary",loading:this.state.loading,onClick:function(t){return s.bind(e)(t)}},"\u786e\u5b9a"))))))}}]),t}(Y.default.Component));J=z()(J),t.default=J,e.exports=t.default},1876:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t,a){var n=this.state.pagination;n.current=e.current,n.limit=e.pageSize,this.setState({pagination:n}),this.fetch(M({pageSize:e.pageSize,limit:e.pageSize,page:e.current,currentPage:e.current,sortField:a.field,sortOrder:a.order},t))}function u(e,t){q.RequireUtils.baseRequire(e,t,function(e){if(1==e.code){var t=e.data.list,a=t.map(function(e,t){return e.key=t,e}),n=this.state.pagination;n.limit=n.pageSize,n.total=e.data.count,this.setState({loading:!1,data:a,pagination:n})}else this.setState({data:[]})}.bind(this))}Object.defineProperty(t,"__esModule",{value:!0});var c=a(168),d=n(c),s=a(263),f=n(s),p=a(45),m=n(p),h=a(41),y=n(h),g=a(52),b=n(g),v=a(12),_=n(v),E=a(169),w=n(E),C=a(265),k=n(C),x=a(64),S=n(x),O=a(21),L=n(O),P=a(29),F=n(P),j=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};a(262),a(468),a(51),a(62),a(56),a(38),a(264),a(469),a(63),a(27),a(31);var R=a(0),D=n(R),q=a(20),T=a(1875),Y=n(T),U=a(1877),A=n(U),V=a(24),I=(n(V),a(1631)),z=(n(I),F.default.TabPane,L.default.Option,S.default.Search,k.default.MonthPicker,k.default.RangePicker),N=function(e){function t(e){l(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleAddCancel=function(){a.refs.AddContractManagement.resetFields(),a.setState({staionadd:!1})},a.handleUpateCancel=function(){a.refs.UpdateContractManagement.resetFields(),a.setState({staionupdate:!1})},a.changeSearchParams=function(e,t){var n=a.state.searchparams;n[e]=t,a.setState({searchparams:n})},a.changerangeicker=function(e,t){var n=a.state.searchparams;n.s_date=t[0],n.e_date=t[1],a.setState({searchparams:n})},a.search=function(){var e=a.state.searchparams;a.fetch(e)},a.state={data:[],searchparams:{find_str:"",s_date:"",e_date:""},staionadd:!1,staionupdate:!1,imageFiles:[],pagination:{pageSize:10},updateData:[],loading:!1},a.callback=a.callback.bind(a),a}return i(t,e),j(t,[{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.form.validateFields(function(e,t){e||console.log("Received values of form: ",t)})}},{key:"callback",value:function(e){console.log(e)}},{key:"handleTableChange",value:function(e,t,a){o.bind(this)(e,t,a)}},{key:"fetch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u.bind(this)("contract/contract-list",e)}},{key:"componentDidMount",value:function(){this.fetch()}},{key:"addFieldStationList",value:function(){this.setState({staionadd:!0})}},{key:"myselfonkeydown",value:function(e){13==e.keyCode&&this.search()}},{key:"updateStaion",value:function(e){var t=this;q.RequireUtils.baseRequire("contract/contract-info",{id:e},function(e){if(1==e.code){var a=e.data.contract,n=e.data.images,l=n.map(function(e,t){return{uid:t,name:e.contract_url,status:"done",url:e.url}});t.setState({staionupdate:!0,updateData:a,imageFiles:l})}else alert(e.msg)}.bind(this))}},{key:"deleteStaion",value:function(e,t){e.stopPropagation(),e.preventDefault();var a=this;w.default.confirm({title:"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u8be5\u5408\u540c\u5417\uff1f",content:"",onOk:function(){q.RequireUtils.baseRequire("contract/del-contract",{id:t},function(e){alert(e.msg),this.fetch(this.state.pagination)}.bind(a))},onCancel:function(){console.log("Cancel")}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.staionadd,l=t.staionupdate,r=t.updateData,i=t.imageFiles,o=[{title:"\u5408\u540c\u7f16\u53f7",dataIndex:"contract_code",key:"contract_code"},{title:"\u5408\u540c\u540d\u79f0",dataIndex:"contract_name",key:"contract_name"},{title:"\u5408\u540c\u7532\u65b9",dataIndex:"seler_name",key:"seler_name"},{title:"\u5408\u540c\u4e59\u65b9",dataIndex:"buyer_name",key:"buyer_name"},{title:"\u5408\u540c\u622a\u6b62\u65f6\u95f4",dataIndex:"end_date",key:"end_date"},{title:"\u5408\u540c\u72b6\u6001",dataIndex:"status_name",key:"status_name"},{title:"\u64cd\u4f5c",key:"action",render:function(t,a){return D.default.createElement("span",null,D.default.createElement("a",{href:"javaScript:void(0)",onClick:function(){return e.updateStaion.bind(e)(a.id)},style:{marginRight:"10px"}},D.default.createElement(_.default,{type:"edit",style:{marginRight:"5px"}}),"\u7f16\u8f91"),D.default.createElement("a",{href:"javaScript:void(0)",onClick:function(t){return e.deleteStaion.bind(e)(t,a.id)}},D.default.createElement(_.default,{type:"delete"}),"\u5220\u9664"))}}];return D.default.createElement("div",{className:"my-table-title-center no-content-card",onKeyDown:function(t){return e.myselfonkeydown.bind(e)(t)}},D.default.createElement(m.default,null,D.default.createElement(b.default,{span:6},D.default.createElement("div",{style:{padding:"10px 0"}},D.default.createElement(z,{style:{width:"100%"},format:"YYYY-MM-DD",enterButton:!0,size:"large",onChange:this.changerangeicker}))),D.default.createElement(b.default,{span:2},D.default.createElement("div",{style:{padding:"10px 0"}},D.default.createElement(y.default,{size:"large",onClick:this.search},"\u7b5b\u9009"))),D.default.createElement(b.default,{span:8}),D.default.createElement(b.default,{span:6},D.default.createElement("div",{style:{padding:"10px 0"}},D.default.createElement(S.default,{placeholder:"\u4f01\u4e1a\u540d\u79f0",size:"large",onChange:function(t){return e.changeSearchParams("find_str",t.target.value)}}))),D.default.createElement(b.default,{span:2},D.default.createElement("div",{style:{padding:"10px 0"}},D.default.createElement(y.default,{icon:"search",size:"large",onClick:this.search},"\u67e5\u8be2")))),D.default.createElement(d.default,{title:"",type:"card"},D.default.createElement(m.default,{gutter:8,style:{marginTop:"10px"}},D.default.createElement(b.default,{span:24},D.default.createElement("div",{style:{textAlign:"right",padding:"15px"}},D.default.createElement("span",{onClick:this.addFieldStationList.bind(this),style:{cursor:"pointer"}},D.default.createElement(_.default,{type:"plus-circle-o",style:{marginRight:"10px"}}),"\u65b0\u589e")))),D.default.createElement(f.default,{columns:o,dataSource:a,pagination:this.state.pagination,loading:this.state.loading,onChange:this.handleTableChange.bind(this)}),D.default.createElement(w.default,{title:"\u5408\u540c\u65b0\u589e",visible:n,onOk:this.handleOk,onCancel:this.handleAddCancel,width:"60%",footer:null},D.default.createElement(Y.default,{ref:"AddContractManagement",handleAddCancel:this.handleAddCancel,go:function(){return e.fetch(e.state.pagination)}})),D.default.createElement(w.default,{title:"\u5408\u540c\u7f16\u8f91",visible:l,onOk:this.handleOk,onCancel:this.handleUpateCancel,width:"60%",footer:null},D.default.createElement(A.default,{ref:"UpdateContractManagement",handleUpateCancel:this.handleUpateCancel,imageFiles:i,reactp:this,updateData:r,go:function(){return e.fetch(e.state.pagination)}}))))}}]),t}(D.default.Component);t.default=N,e.exports=t.default},1877:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(){return!1}function c(e,t){var a=this.state.form;a[e]=t,this.setState({form:a})}function d(){this.props.handleUpateCancel(),this.props.form.resetFields()}function s(e){var t=this;this.setState({loading:!0});var a=this.state,n=a.fileList,l=a.showFileList,r=new FormData;n.forEach(function(e){r.append("ContractForm[contract_files][]",e)});var i=l.filter(function(e){return!e.my_custom});0!=i.length&&i?i.forEach(function(e){r.append("contract_imgs[]",e.name)}):r.append("contract_imgs[]",[]),e.preventDefault(),this.props.form.validateFields(function(e,a){if(console.log(e),e)t.setState({loading:!1});else{var n=(t.state.form,t.props.updateData.id);r.append("buyer_id",a.buyer_id),r.append("saler_id",a.saler_id),r.append("start_date",a.start_date.format("YYYY-MM-DD")),r.append("end_date",a.end_date.format("YYYY-MM-DD")),r.append("contract_code",a.contract_code),r.append("contract_name",a.contract_name),r.append("type_id",a.type_id),r.append("id",n),A.RequireUtils.fileBaseRequire("contract/modify-contract",r,function(e){e.code?(alert(e.msg),this.setState({loading:!1,fileList:[],showFileList:[]}),this.props.go(),this.props.handleUpateCancel(),this.props.form.resetFields()):(alert(e.msg),this.setState({loading:!1}))}.bind(t))}})}Object.defineProperty(t,"__esModule",{value:!0});var f=a(41),p=n(f),m=a(169),h=n(m),y=a(266),g=n(y),b=a(45),v=n(b),_=a(52),E=n(_),w=a(64),C=n(w),k=a(12),x=n(k),S=a(265),O=n(S),L=a(21),P=n(L),F=a(29),j=n(F),M=a(100),R=n(M),D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},q=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(62),a(264),a(470),a(51),a(56),a(63),a(38),a(469),a(27),a(31),a(129);var T=a(0),Y=n(T),U=a(1794),A=(n(U),a(20)),V=a(1631),I=(n(V),a(24)),z=n(I),N=R.default.create,G=R.default.Item,J=(j.default.TabPane,P.default.Option),B=(O.default.MonthPicker,function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleCancel=function(){return a.setState({previewVisible:!1})},a.handleChange=function(e){var t=a,n=t.props.reactp,r=new FileReader;if("removed"==e.file.status){var i=a.state.showFileList,o=i.indexOf(e.file),u=i.slice();return u.splice(o,1),n.setState({imageFiles:[].concat(l(u))}),void t.setState({remainFiles:[].concat(l(u))})}r.readAsDataURL(e.file),r.onload=function(e){var a=t.state.showFileList,r=t.state.newFiles,i={uid:(new Date).getTime(),name:"xxx.png",status:"done",url:this.result,my_custom:!0};n.setState({imageFiles:[].concat(l(a),[i])}),t.setState({newFiles:[].concat(l(r),[i])})}},a.state={loading:!1,previewVisible:!1,previewImage:"",updateData:{},imageFiles:[],remainFiles:[],newFiles:[],companyoptions:[],contracttypeoptions:[],fileList:[],showFileList:[],uploading:!1,form:{buyer_id:"",saler_id:"",start_date:"",end_date:"",contract_code:"",contract_name:"",type_id:""}},a.callback=a.callback.bind(a),a}return o(t,e),q(t,[{key:"callback",value:function(e){console.log(e)}},{key:"componentDidMount",value:function(){A.RequireUtils.baseRequire("/contract/company-select",{},function(e){if(1==e.code){var t=e.data.list;this.setState({companyoptions:t})}else alert(e.msg)}.bind(this)),A.RequireUtils.baseRequire("/contract/type-select",{},function(e){if(1==e.code){var t=e.data.list;this.setState({contracttypeoptions:t})}else alert(e.msg)}.bind(this))}},{key:"contractLen",value:function(e,t,a){t.length>20?a("\u4e0d\u5f97\u8d85\u8fc720\u4f4d!"):a()}},{key:"contractNameLen",value:function(e,t,a){t.length>20?a("\u4e0d\u5f97\u8d85\u8fc720\u4f4d!"):a()}},{key:"render",value:function(){var e=this,t={labelCol:{span:24},wrapperCol:{span:24}},a=this.props.updateData,n=a.buyer_id,r=a.saler_id,i=a.start_date,o=a.end_date,f=a.contract_code,m=a.contract_name,y=a.type_id,b=this.props.imageFiles;this.state.showFileList=b,this.state.remainFiles=b;var _=this.state,w=_.previewVisible,k=_.previewImage,S=_.companyoptions,L=_.showFileList,F=_.contracttypeoptions,j=this.props.form.getFieldDecorator,M=Y.default.createElement("div",null,Y.default.createElement(x.default,{type:"plus"}),Y.default.createElement("div",{className:"ant-upload-text"},"Upload")),q={action:"//jsonplaceholder.typicode.com/posts/",listType:"picture-card",onRemove:function(t){e.setState(function(e){var a=e.fileList,n=a.indexOf(t),l=a.slice();return l.splice(n,1),{fileList:l}})},beforeUpload:function(t){return e.setState(function(e){return{fileList:[].concat(l(e.fileList),[t])}}),!1}};return Y.default.createElement("div",{className:"my-custom-padding"},Y.default.createElement("main",null,Y.default.createElement(R.default,null,Y.default.createElement(v.default,{gutter:8},Y.default.createElement(E.default,{span:11},Y.default.createElement(G,D({},t,{label:"\u5408\u540c\u7f16\u53f7"}),j("contract_code",{initialValue:f,rules:[{required:!0,message:"\u8be5\u9009\u9879\u4e3a\u5fc5\u586b\u9879"},{validator:this.contractLen.bind(this)}]})(Y.default.createElement(C.default,{onContextMenu:u,onPaste:u,onCopy:u,onCut:u,autoComplete:"off",onChange:function(t){return c.bind(e)("contract_code",t.target.value)}})))),Y.default.createElement(E.default,{span:2}),Y.default.createElement(E.default,{span:11},Y.default.createElement(G,D({},t,{label:"\u5408\u540c\u540d\u79f0"}),j("contract_name",{initialValue:m,rules:[{required:!0,message:"\u8be5\u9009\u9879\u4e3a\u5fc5\u586b\u9879"},{validator:this.contractNameLen.bind(this)}]})(Y.default.createElement(C.default,{onContextMenu:u,onPaste:u,onCopy:u,onCut:u,autoComplete:"off",onChange:function(t){return c.bind(e)("contract_name",t.target.value)}}))))),Y.default.createElement(v.default,{gutter:8},Y.default.createElement(E.default,{span:11},Y.default.createElement(G,D({},t,{label:"\u9009\u62e9\u7532\u65b9"}),j("saler_id",{initialValue:r+"",rules:[{required:!0,message:"\u8be5\u9009\u9879\u4e3a\u5fc5\u586b\u9879"}]})(Y.default.createElement(P.default,{style:{width:"100%"},onChange:function(t){return c.bind(e)("saler_id",t)}},S.map(function(e,t){return Y.default.createElement(J,{value:e.id,key:t},e.company_name)}))))),Y.default.createElement(E.default,{span:2}),Y.default.createElement(E.default,{span:11},Y.default.createElement(G,D({},t,{label:"\u9009\u62e9\u4e59\u65b9"}),j("buyer_id",{initialValue:n+"",rules:[{required:!0,message:"\u8be5\u9009\u9879\u4e3a\u5fc5\u586b\u9879"}]})(Y.default.createElement(P.default,{style:{width:"100%"},onChange:function(t){return c.bind(e)("buyer_id",t)}},S.map(function(e,t){return Y.default.createElement(J,{value:e.id,key:t},e.company_name)})))))),Y.default.createElement(v.default,null,Y.default.createElement(E.default,{span:11},Y.default.createElement("div",null,Y.default.createElement("span",{style:{color:"red",fontSize:"14px",fontFamily:"SimSun",marginRight:"4px"}},"*"),"\u6301\u7eed\u65f6\u95f4"),Y.default.createElement(v.default,{style:{marginTop:"3px"}},Y.default.createElement(E.default,{span:11},Y.default.createElement(G,t,j("start_date",{initialValue:(0,z.default)(i,"YYYY-MM-DD"),rules:[{required:!0,message:"\u8be5\u9009\u9879\u4e3a\u5fc5\u586b\u9879"}]})(Y.default.createElement(O.default,{placeholder:"",format:"YYYY-MM-DD",onChange:function(t,a){return c.bind(e)("start_date",a)},style:{width:"100%"}})))),Y.default.createElement(E.default,{span:2},Y.default.createElement("div",{style:{marginTop:"9px",textAlign:"center"}},"\u81f3")),Y.default.createElement(E.default,{span:11},Y.default.createElement(G,t,j("end_date",{initialValue:(0,z.default)(o,"YYYY-MM-DD"),rules:[{required:!0,message:"\u8be5\u9009\u9879\u4e3a\u5fc5\u586b\u9879"}]})(Y.default.createElement(O.default,{placeholder:"",format:"YYYY-MM-DD",onChange:function(t,a){return c.bind(e)("end_date",a)},style:{width:"100%"}})))))),Y.default.createElement(E.default,{span:2}),Y.default.createElement(E.default,{span:11},Y.default.createElement(G,D({},t,{label:"\u5408\u540c\u7c7b\u578b"}),j("type_id",{initialValue:y+"",rules:[{required:!0,message:"\u8be5\u9009\u9879\u4e3a\u5fc5\u586b\u9879"}]})(Y.default.createElement(P.default,{style:{width:"100%"},onChange:function(t){return c.bind(e)("type_id",t)}},F.map(function(e,t){return Y.default.createElement(J,{value:e.meta_code,key:t},e.meta_name)})))))),Y.default.createElement(v.default,{gutter:8},Y.default.createElement(v.default,{gutter:8,style:{marginTop:"10px",marginLeft:"4px"}},Y.default.createElement(g.default,D({},q,{fileList:L,onChange:this.handleChange}),L.length>=1e3?null:M),Y.default.createElement("small",{style:{verticalAlign:"bottom",marginLeft:"10px",display:"inline-block"}},"\u4ec5\u652f\u6301JPG\u3001PNG\u683c\u5f0f\uff0c\u6587\u4ef6\u5c0f\u4e8e1M(\u65b9\u5f62\u56fe)"),Y.default.createElement(h.default,{visible:w,footer:null,onCancel:this.handleCancel},Y.default.createElement("img",{alt:"example",style:{width:"100%"},src:k})))),Y.default.createElement(v.default,{style:{marginTop:"10px"}},Y.default.createElement(E.default,{style:{textAlign:"right"}},Y.default.createElement(p.default,{onClick:d.bind(this),style:{marginRight:"10px"}},"\u53d6\u6d88"),Y.default.createElement(p.default,{type:"primary",loading:this.state.loading,onClick:function(t){return s.bind(e)(t)}},"\u786e\u5b9a"))))))}}]),t}(Y.default.Component));B=N()(B),t.default=B,e.exports=t.default},2034:function(e,t,a){t=e.exports=a(10)(void 0),t.push([e.i,"a {\n  color: #9a9898;\n}\n.my-table-title-center .ant-table-thead > tr > th,\n.my-table-title-center .ant-table-tbody > tr > td {\n  text-align: center;\n}\n.my-custom-padding .ant-form-item {\n  margin-bottom: 0 ;\n}\n.my-custom-padding .ant-col-24.ant-form-item-label {\n  padding: 0;\n}\n",""])}});
//# sourceMappingURL=40.49f49d8b.chunk.js.map